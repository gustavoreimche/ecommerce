<app-toast-container></app-toast-container>

<!-- PRODUTOS -->
<div class="flex justify-center flex-wrap mb-3 gap-3 mt-4">

  <div class="card shadow" style="width: 18rem;" *ngFor="let product of products">

    <ngb-carousel class="h-52">
      <ng-template ngbSlide *ngFor="let image of product.imageUrl" class="text-black">
        <div class="picsum-img-wrapper">
          <img [src]="image" alt="preview" class="card-img-top h-52 object-cover" />
        </div>
      </ng-template>
    </ngb-carousel>


    <div class="card-body flex flex-col justify-between gap-1">
      <h5 class="card-title">Nome: {{product.name}}</h5>
      <p class="card-text">Descrição: {{product.description}}</p>
      <p class="card-text">Categoria: {{product.category?.name}}</p>
      <p class="card-text">R$ {{product.price?.toFixed(2)}}</p>
      <div class="flex justify-center w-full items-center">
        <button class="btn btn-dark rounded" (click)="dicraseQuantity(product._id ? product._id : '')">-</button>
        <span class="mx-2">{{product.quantityCart}}</span>
        <button class="btn btn-dark rounded" (click)="incraseQuantity(product._id ? product._id : '')">+</button>
      </div>
      <div class="flex justify-center items-end w-full">
        <button class="btn btn-primary" (click)="addToCart(product)">Adicionar ao Carrinho</button>
      </div>
    </div>
  </div>

</div>

<!-- CARRINHO -->
<table class="table">
  <thead>
    <tr>
      <th scope="col">Produto</th>
      <th scope="col">Preço</th>
      <th scope="col">Quantidade</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let cartItems of shoppingCart.cartItems">
      <td scope="row"> {{cartItems.product?.name}} </td>
      <td>{{cartItems.product?.price | currency:'BRL':'symbol':'1.2-2':'pt-BR'}}</td>
      <td>
        <button mat-mini-fab class="bg-black rounded-circle w-7 h-7 align-middle"
          (click)="dicraseCartItemFromShoppingCart(cartItems._id ? cartItems._id : '', cartItems)"><i
            class="material-icons text-white">remove</i></button>
        {{cartItems.quantity}}
        <button mat-mini-fab class="bg-black rounded-circle w-7 h-7 align-middle"
          (click)="incraseCartItemFromShoppingCart(cartItems._id ? cartItems._id : '', cartItems)"><i
            class="material-icons text-white">add</i></button>
      </td>
    </tr>
  </tbody>
</table>
{{shoppingCart.total | currency:'BRL':'symbol':'1.2-2':'pt-BR'}}

<button class="btn btn-primary">Fechar pedido</button>